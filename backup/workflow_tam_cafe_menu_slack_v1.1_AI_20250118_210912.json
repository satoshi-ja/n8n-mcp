{
  "name": "tamç‰ˆ_ã‚«ãƒ•ã‚§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’slackã«è‡ªå‹•æŠ•ç¨¿ v1.1 AIå‹•ä½œç‰ˆ",
  "nodes": [
    {
      "parameters": {
        "path": "cafe-menu-form-webhook",
        "formTitle": "ã‚«ãƒ•ã‚§ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‘ŠçŸ¥ãƒ•ã‚©ãƒ¼ãƒ ",
        "formDescription": "å†™çœŸã¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼åã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€ãƒ—ãƒ­ç´šã®ã‚«ãƒ•ã‚§å‘ŠçŸ¥ãŒç¬æ™‚ã«å®Œæˆï¼",
        "formFields": {
          "values": [
            {
              "fieldLabel": "ãƒ¡ãƒ‹ãƒ¥ãƒ¼å",
              "requiredField": true
            },
            {
              "fieldLabel": "ã‚«ãƒ†ã‚´ãƒª",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "ã‚³ãƒ¼ãƒ’ãƒ¼ â˜•"
                  },
                  {
                    "option": "ãƒ‰ãƒªãƒ³ã‚¯ğŸ¹"
                  },
                  {
                    "option": "ã‚¹ã‚¤ãƒ¼ãƒ„ ğŸ§"
                  },
                  {
                    "option": "ãƒ©ãƒ³ãƒğŸ"
                  },
                  {
                    "option": "BARğŸº"
                  }
                ]
              },
              "requiredField": true
            },
            {
              "fieldLabel": "å†™çœŸ",
              "fieldType": "file",
              "multipleFiles": false,
              "acceptFileTypes": ".jpg,.jpeg,.png",
              "requiredField": true
            },
            {
              "fieldLabel": "å ´æ‰€",
              "requiredField": true
            },
            {
              "fieldLabel": "æä¾›æ™‚é–“",
              "requiredField": true
            },
            {
              "fieldLabel": "ç‰¹åˆ¥ãªèª¬æ˜",
              "fieldType": "textarea",
              "requiredField": "={{ false }}"
            }
          ]
        },
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "3135039f-5fa5-422c-b8d6-6a0ada6645db",
      "name": "Form Trigger",
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.1,
      "position": [
        0,
        0
      ]
    },
    {
      "parameters": {
        "jsCode": "// ãƒ‡ãƒãƒƒã‚°: ã™ã¹ã¦ã®ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª\nconsole.log('=== BINARY DATA DEBUG ===');\nconsole.log('Form Trigger binary:', $('Form Trigger').item.binary);\nconsole.log('Form Trigger binary keys:', $('Form Trigger').item.binary ? Object.keys($('Form Trigger').item.binary) : 'No binary');\nconsole.log('Input binary:', $input.item.binary);\nconsole.log('Input binary keys:', $input.item.binary ? Object.keys($input.item.binary) : 'No binary');\n\n// ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®å–å¾—\nconst formData = $('Form Trigger').item.json;\n\n// å„ãƒãƒ¼ãƒ‰ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å®‰å…¨ã«å–å¾—ï¼ˆå­˜åœ¨ã—ãªã„å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨ï¼‰\nlet imageAnalysis = \"ç¾å‘³ã—ãã†ãªæ–™ç†ã®å†™çœŸã§ã™ã€‚\";\nlet catchphrase = \"æœ¬æ—¥ã®ãŠã™ã™ã‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼\";\nlet description = \"ãœã²ãŠè©¦ã—ãã ã•ã„ã€‚\";\n\n// ç”»åƒè§£æãŒæœ‰åŠ¹ãªå ´åˆ\ntry {\n  const imageAnalysisNode = $('ç”»åƒè§£æ (Claude Vision)');\n  if (imageAnalysisNode && imageAnalysisNode.item && imageAnalysisNode.item.json) {\n    imageAnalysis = imageAnalysisNode.item.json.content[0].text;\n    console.log('ç”»åƒè§£æå–å¾—æˆåŠŸ');\n  }\n} catch (e) {\n  console.log('ç”»åƒè§£æãƒãƒ¼ãƒ‰ãŒç„¡åŠ¹ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼:', e.message);\n}\n\n// ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆã®çµæœã‚’å–å¾—\ntry {\n  const catchphraseNode = $('ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆ');\n  if (catchphraseNode && catchphraseNode.item && catchphraseNode.item.json) {\n    catchphrase = catchphraseNode.item.json.content[0].text;\n    console.log('ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºå–å¾—æˆåŠŸ:', catchphrase);\n  }\n} catch (e) {\n  console.log('ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆãƒãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼:', e.message);\n}\n\n// èª¬æ˜æ–‡ç”Ÿæˆã®çµæœã‚’å–å¾—\ntry {\n  const descriptionNode = $('èª¬æ˜æ–‡ç”Ÿæˆ');\n  if (descriptionNode && descriptionNode.item && descriptionNode.item.json) {\n    description = descriptionNode.item.json.content[0].text;\n    console.log('èª¬æ˜æ–‡å–å¾—æˆåŠŸ');\n  }\n} catch (e) {\n  console.log('èª¬æ˜æ–‡ç”Ÿæˆãƒãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼:', e.message);\n}\n\n// ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ãŸè£…é£¾ã®é¸æŠ\nlet decoration = {};\nswitch(formData.ã‚«ãƒ†ã‚´ãƒª) {\n  case 'ã‚³ãƒ¼ãƒ’ãƒ¼ â˜•':\n    decoration = {\n      mainEmoji: 'â˜•',\n      subEmojis: ['âœ¨', 'â­'],\n      borderStyle: 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'\n    };\n    break;\n  case 'ãƒ‰ãƒªãƒ³ã‚¯ğŸ¹':\n    decoration = {\n      mainEmoji: 'ğŸ¹',\n      subEmojis: ['ğŸŒ´', 'ğŸŒŠ'],\n      borderStyle: 'ã€œã€œã€œã€œã€œã€œã€œã€œã€œã€œã€œã€œã€œã€œã€œ'\n    };\n    break;\n  case 'ã‚¹ã‚¤ãƒ¼ãƒ„ ğŸ§':\n    decoration = {\n      mainEmoji: 'ğŸ§',\n      subEmojis: ['ğŸ‰', 'ğŸ’•'],\n      borderStyle: 'ğŸŒˆ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ğŸŒˆ'\n    };\n    break;\n  case 'ãƒ©ãƒ³ãƒğŸ':\n    decoration = {\n      mainEmoji: 'ğŸ',\n      subEmojis: ['ğŸŒ¿', 'ğŸ¥—'],\n      borderStyle: 'â—†â—‡â—†â—‡â—†â—‡â—†â—‡â—†â—‡â—†â—‡â—†â—‡â—†'\n    };\n    break;\n  case 'BARğŸº':\n    decoration = {\n      mainEmoji: 'ğŸº',\n      subEmojis: ['ğŸ†', 'ğŸŒ™'],\n      borderStyle: 'â˜…â˜†â˜…â˜†â˜…â˜†â˜…â˜†â˜…â˜†â˜…â˜†â˜…'\n    };\n    break;\n  default:\n    decoration = {\n      mainEmoji: 'ğŸ´',\n      subEmojis: ['âœ¨', 'â­'],\n      borderStyle: 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”'\n    };\n}\n\n// ç¾åœ¨æ™‚åˆ»ã®å–å¾—\nconst now = new Date();\nconst hours = now.getHours();\nlet timeGreeting = '';\nif (hours < 12) {\n  timeGreeting = 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼æœã®';\n} else if (hours < 17) {\n  timeGreeting = 'ã“ã‚“ã«ã¡ã¯ï¼åˆå¾Œã®';\n} else {\n  timeGreeting = 'ãŠç–²ã‚Œæ§˜ã§ã™ï¼å¤•æ–¹ã®';\n}\n\n// SlackæŠ•ç¨¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®çµ„ã¿ç«‹ã¦ (Slackã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—å½¢å¼)\nconst slackMessage = `\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  ${decoration.mainEmoji} æœ¬æ—¥ã®Special ${decoration.mainEmoji}  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n${decoration.subEmojis[0]} *${catchphrase}* ${decoration.subEmojis[0]}\n\n${description}\n\n${decoration.borderStyle}\nğŸ“ å ´æ‰€: ${formData.å ´æ‰€}\nâ° æä¾›æ™‚é–“: ${formData.æä¾›æ™‚é–“}\n${decoration.borderStyle}\n\nğŸ¯ ${timeGreeting}ã²ã¨ã¨ãã€\n${decoration.mainEmoji} ã§ã»ã£ã¨ä¸€æ¯ã¤ãã¾ã›ã‚“ã‹ï¼Ÿ\n\n#tam and co. #ä»Šæ—¥ã®ã‚ªã‚¹ã‚¹ãƒ¡ #${formData.ã‚«ãƒ†ã‚´ãƒª.replace(' ', '')}\n`;\n\n// Form Triggerã‹ã‚‰ç›´æ¥ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—\nconst originalBinary = $('Form Trigger').item.binary;\n\n// ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ¼åã‚’çµ±ä¸€ï¼ˆé‡è¦ï¼ï¼‰\nlet normalizedBinary = {};\nif (originalBinary && Object.keys(originalBinary).length > 0) {\n  const firstKey = Object.keys(originalBinary)[0];\n  console.log('Original binary key:', firstKey);\n  normalizedBinary = { data: originalBinary[firstKey] };\n} else if ($input.item.binary && Object.keys($input.item.binary).length > 0) {\n  const firstKey = Object.keys($input.item.binary)[0];\n  console.log('Input binary key:', firstKey);\n  normalizedBinary = { data: $input.item.binary[firstKey] };\n}\n\nconsole.log('Normalized binary:', normalizedBinary);\n\n// çµæœã‚’è¿”ã™ï¼ˆãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚‚å«ã‚ã‚‹ï¼‰\nreturn {\n  json: {\n    slackMessage: slackMessage,\n    menuName: formData.ãƒ¡ãƒ‹ãƒ¥ãƒ¼å,\n    category: formData.ã‚«ãƒ†ã‚´ãƒª,\n    decoration: decoration\n  },\n  // ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’'data'ã¨ã„ã†ã‚­ãƒ¼åã§ç¢ºå®Ÿã«æ¸¡ã™\n  binary: normalizedBinary\n};"
      },
      "id": "15e1cc30-a548-4ea0-83a8-d9d810a828cd",
      "name": "SlackæŠ•ç¨¿æ§‹ç¯‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1008,
        0
      ]
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C096CHYL9U2",
          "mode": "list",
          "cachedResultName": "tam-and-co"
        },
        "text": "={{ $json.slackMessage }}",
        "otherOptions": {}
      },
      "id": "4f512acf-3abe-45e3-b438-b54fe1b1553c",
      "name": "SlackæŠ•ç¨¿",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [
        1200,
        0
      ]
    },
    {
      "parameters": {
        "resource": "file",
        "options": {
          "channelId": "C096CHYL9U2"
        }
      },
      "id": "edd8519b-8b1d-43d6-bcb0-89a4a18ab6a5",
      "name": "å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [
        1200,
        208
      ],
      "continueOnFail": true
    },
    {
      "parameters": {
        "jsCode": "// Credentialsã‹ã‚‰è‡ªå‹•çš„ã«APIã‚­ãƒ¼ã‚’å–å¾—\nconst credentials = await this.getCredentials('anthropicApi');\nconst API_KEY = credentials.apiKey;\n\n// ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—\nlet imageData = null;\nlet binaryObj = null;\n\n// $input.item.binaryã‹ã‚‰å–å¾—\nif ($input.item && $input.item.binary) {\n  binaryObj = $input.item.binary;\n  const keys = Object.keys(binaryObj);\n  console.log('Binary keys:', keys);\n\n  if (keys.length > 0) {\n    const firstKey = keys[0];\n    if (binaryObj[firstKey] && binaryObj[firstKey].data) {\n      imageData = binaryObj[firstKey].data;\n      console.log(`Using binary data from key: ${firstKey}`);\n    }\n  }\n}\n\nif (!imageData) {\n  throw new Error('ç”»åƒãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');\n}\n\n// APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒœãƒ‡ã‚£ã‚’ä½œæˆ\nconst requestBody = {\n  model: \"claude-3-5-sonnet-20241022\",\n  max_tokens: 300,\n  messages: [\n    {\n      role: \"user\",\n      content: [\n        {\n          type: \"text\",\n          text: \"ã“ã®ç”»åƒã‚’è¦‹ã¦ã€æ–™ç†ã‚„é£²ã¿ç‰©ã®ç‰¹å¾´ã‚’è©³ã—ãèª¬æ˜ã—ã¦ãã ã•ã„ã€‚è‰²åˆã„ã€ç››ã‚Šä»˜ã‘ã€é›°å›²æ°—ãªã©ã‚’å«ã‚ã¦ã€é­…åŠ›çš„ã«æå†™ã—ã¦ãã ã•ã„ã€‚\"\n        },\n        {\n          type: \"image\",\n          source: {\n            type: \"base64\",\n            media_type: \"image/jpeg\",\n            data: imageData\n          }\n        }\n      ]\n    }\n  ]\n};\n\n// this.helpers.requestã‚’ä½¿ç”¨\ntry {\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'x-api-key': API_KEY,\n      'anthropic-version': '2023-06-01'\n    },\n    body: JSON.stringify(requestBody)\n  };\n\n  const response = await this.helpers.request(\n    'https://api.anthropic.com/v1/messages',\n    options\n  );\n\n  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ‘ãƒ¼ã‚¹\n  const result = JSON.parse(response);\n\n  console.log('API response received');\n\n  // çµæœã‚’è¿”ã™ï¼ˆãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚‚ä¿æŒï¼‰\n  return {\n    json: result,\n    binary: binaryObj\n  };\n\n} catch (error) {\n  console.log('API Error:', error.message);\n  throw new Error(`ç”»åƒè§£æã‚¨ãƒ©ãƒ¼: ${error.message}`);\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        336,
        224
      ],
      "id": "dde033f6-5926-42a0-931a-edcace3eea44",
      "name": "ç”»åƒè§£æ (Claude Vision)"
    },
    {
      "parameters": {
        "jsCode": "// Credentialsã‹ã‚‰è‡ªå‹•çš„ã«APIã‚­ãƒ¼ã‚’å–å¾—\nconst credentials = await this.getCredentials('anthropicApi');\nconst API_KEY = credentials.apiKey;\n\n// å‰ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰ç”»åƒè§£æçµæœã‚’å–å¾—\nconst imageAnalysis = $input.item.json.content[0].text;\n\n// Form Triggerã‹ã‚‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼æƒ…å ±ã‚’å–å¾—\nconst formData = $('Form Trigger').item.json;\nconst menuName = formData.ãƒ¡ãƒ‹ãƒ¥ãƒ¼å;\nconst category = formData.ã‚«ãƒ†ã‚´ãƒª;\n\n// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆ\nconst prompt = `${menuName}ã¨ã„ã†${category}ã®æ–™ç†ã«ã¤ã„ã¦ã€ã‚«ãƒ•ã‚§ã®å®£ä¼ç”¨ã«é­…åŠ›çš„ã§çŸ­ã„ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä¸€ã¤ã ã‘ä½œã£ã¦ãã ã•ã„ã€‚å‰ç½®ãã‚„èª¬æ˜ã¯ä¸è¦ã§ã€ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºã®ã¿ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚\\n\\nç”»åƒåˆ†æçµæœï¼š${imageAnalysis}`;\n\n// APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ\nconst requestBody = {\n  model: \"claude-3-5-sonnet-20241022\",\n  max_tokens: 100,\n  messages: [\n    {\n      role: \"user\",\n      content: prompt\n    }\n  ]\n};\n\ntry {\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'x-api-key': API_KEY,\n      'anthropic-version': '2023-06-01'\n    },\n    body: JSON.stringify(requestBody)\n  };\n\n  const response = await this.helpers.request(\n    'https://api.anthropic.com/v1/messages',\n    options\n  );\n\n  const result = JSON.parse(response);\n\n  console.log('ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆå®Œäº†');\n\n  return {\n    json: result,\n    binary: $input.item.binary\n  };\n\n} catch (error) {\n  throw new Error(`ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}`);\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        608,
        224
      ],
      "id": "8700a676-56c9-4631-9b5e-2ae644a7628e",
      "name": "ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆ"
    },
    {
      "parameters": {
        "jsCode": "// Credentialsã‹ã‚‰è‡ªå‹•çš„ã«APIã‚­ãƒ¼ã‚’å–å¾—\nconst credentials = await this.getCredentials('anthropicApi');\nconst API_KEY = credentials.apiKey;\n\n// å‰ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å–å¾—\nconst catchphrase = $input.item.json.content[0].text;\n\n// ç”»åƒè§£æçµæœã‚’å–å¾—\nconst imageAnalysis = $('ç”»åƒè§£æ (Claude Vision)').item.json.content[0].text;\n\n// Form Triggerã‹ã‚‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼æƒ…å ±ã‚’å–å¾—\nconst formData = $('Form Trigger').item.json;\nconst menuName = formData.ãƒ¡ãƒ‹ãƒ¥ãƒ¼å;\nconst category = formData.ã‚«ãƒ†ã‚´ãƒª;\nconst specialNote = formData.ç‰¹åˆ¥ãªèª¬æ˜ || '';\n\n// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆ\nlet prompt = `ã‚«ãƒ•ã‚§ã®Slackå‘ŠçŸ¥ç”¨ã«ã€${menuName}ã«ã¤ã„ã¦ã®é­…åŠ›çš„ãªèª¬æ˜æ–‡ã‚’2ã€œ3æ–‡ã§ä½œæˆã—ã¦ãã ã•ã„ã€‚è³¼è²·æ„æ¬²ã‚’ããã‚‹ã‚ˆã†ãªå†…å®¹ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚\\n\\nãƒ¡ãƒ‹ãƒ¥ãƒ¼åï¼š${menuName}\\nã‚«ãƒ†ã‚´ãƒªï¼š${category}\\nç”»åƒåˆ†æï¼š${imageAnalysis}\\nã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºï¼š${catchphrase}`;\n\nif (specialNote) {\n  prompt += `\\nç‰¹åˆ¥ãªèª¬æ˜ï¼š${specialNote}`;\n}\n\nprompt += '\\n\\nå‰ç½®ãã‚„èª¬æ˜ã¯ä¸è¦ã§ã€èª¬æ˜æ–‡ã®ã¿ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚';\n\n// APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ\nconst requestBody = {\n  model: \"claude-3-5-sonnet-20241022\",\n  max_tokens: 200,\n  messages: [\n    {\n      role: \"user\",\n      content: prompt\n    }\n  ]\n};\n\ntry {\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'x-api-key': API_KEY,\n      'anthropic-version': '2023-06-01'\n    },\n    body: JSON.stringify(requestBody)\n  };\n\n  const response = await this.helpers.request(\n    'https://api.anthropic.com/v1/messages',\n    options\n  );\n\n  const result = JSON.parse(response);\n\n  console.log('èª¬æ˜æ–‡ç”Ÿæˆå®Œäº†');\n\n  return {\n    json: result,\n    binary: $input.item.binary\n  };\n\n} catch (error) {\n  throw new Error(`èª¬æ˜æ–‡ç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}`);\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        800,
        224
      ],
      "id": "d15ace68-4163-4ed6-8f59-748a66dc8d6f",
      "name": "èª¬æ˜æ–‡ç”Ÿæˆ"
    }
  ],
  "connections": {
    "Form Trigger": {
      "main": [
        [
          {
            "node": "ç”»åƒè§£æ (Claude Vision)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SlackæŠ•ç¨¿æ§‹ç¯‰": {
      "main": [
        [
          {
            "node": "SlackæŠ•ç¨¿",
            "type": "main",
            "index": 0
          },
          {
            "node": "å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”»åƒè§£æ (Claude Vision)": {
      "main": [
        [
          {
            "node": "ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆ": {
      "main": [
        [
          {
            "node": "èª¬æ˜æ–‡ç”Ÿæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èª¬æ˜æ–‡ç”Ÿæˆ": {
      "main": [
        [
          {
            "node": "SlackæŠ•ç¨¿æ§‹ç¯‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "meta": {
    "instanceId": "backup_20250118_210912"
  }
}